-- Buat database
CREATE DATABASE IF NOT EXISTS inventaris;
USE inventaris;

-- ------------------------------
-- TABLE : users (admin)
-- ------------------------------
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    nama VARCHAR(150) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Admin default
INSERT INTO users (username, password, nama) VALUES
('admin', MD5('admin123'), 'Administrator');

-- ------------------------------
-- TABLE : barang
-- ------------------------------
CREATE TABLE barang (
    id INT AUTO_INCREMENT PRIMARY KEY,
    kode_barang VARCHAR(50) NOT NULL UNIQUE,
    nama_barang VARCHAR(150) NOT NULL,
    kategori VARCHAR(100),
    satuan VARCHAR(50),
    stok INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Contoh data awal
INSERT INTO barang (kode_barang, nama_barang, kategori, satuan, stok)
VALUES
('BRG001', 'Laptop Lenovo', 'Elektronik', 'Unit', 10),
('BRG002', 'Meja Belajar', 'Furniture', 'Unit', 5);

-- ------------------------------
-- TABLE : barang_masuk
-- ------------------------------
CREATE TABLE barang_masuk (
    id INT AUTO_INCREMENT PRIMARY KEY,
    barang_id INT NOT NULL,
    jumlah INT NOT NULL,
    tanggal_masuk DATE NOT NULL,
    keterangan TEXT,
    FOREIGN KEY (barang_id) REFERENCES barang(id)
);

-- Contoh data
INSERT INTO barang_masuk (barang_id, jumlah, tanggal_masuk, keterangan)
VALUES
(1, 3, '2025-01-10', 'Penambahan stok'),
(2, 2, '2025-01-11', 'Restok barang');

-- ------------------------------
-- TABLE : barang_keluar
-- ------------------------------
CREATE TABLE barang_keluar (
    id INT AUTO_INCREMENT PRIMARY KEY,
    barang_id INT NOT NULL,
    jumlah INT NOT NULL,
    tanggal_keluar DATE NOT NULL,
    penerima VARCHAR(150),
    keterangan TEXT,
    FOREIGN KEY (barang_id) REFERENCES barang(id)
);

-- Contoh data
INSERT INTO barang_keluar (barang_id, jumlah, tanggal_keluar, penerima, keterangan)
VALUES
(1, 1, '2025-01-12', 'Bagian IT', 'Dipinjam sementara'),
(2, 1, '2025-01-13', 'Gudang', 'Distribusi barang');
